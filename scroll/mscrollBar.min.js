!function(){function e(e){this.oScrBar=t.EU.getId(e),this.settings={Anim:!0,Rang:50,scrH:"auto",scrPos:"auto",callbacks:function(){}}}var t=t||{};t.EU={addHandler:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},removeHandler:function(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent?e.detachEvent("on"+t,o):e["on"+t]=null},getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target||e.srcElement},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getId:function(e){return document.getElementById(e)}},e.prototype={constructor:e,init:function(e){var t=this;t.obj=t.extendDeep(e,t.settings),t.addScrEle(),t.dragHFn(),t.oMaxH<0?(t.dragDropFn().removedragEvt(),t.clickFn().removeclickEvt(),t.scrollEFn().removeScrollEvt(),t.oDragMain.style.cssText="display:none;"):(t.dragDropFn().dragEvent(),t.clickFn().clickEvt(),t.scrollEFn().scrollEvt(),t.oDragMain.style.cssText="display:block;",t.setScrollT())},addScrEle:function(){var e=this,t=document.createDocumentFragment(),o=document.createElement("div"),n="",r="",a=100*Math.random(),i=e.oScrBar.innerHTML;n='<div class="mx-ScrollBox" style="position:relative; height:100%; overflow:hidden; max-width:100%;"><div class="mx_container" style="position: absolute;top: 0;left: 0;width: 100%;height: auto;overflow: hidden;">'+i+"</div></div>",r='<div class="mx-draggerCon"><div class="mx-draggerCn Draggable'+a+'"></div></div>',e.tardrag="Draggable"+a,o.innerHTML=r,e.oScrBar.innerHTML=n,e.oScrBox=e.oScrBar.children[0],e.oScrCn=e.oScrBox.getElementsByTagName("div")[0],e.oMaxH=e.oScrCn.offsetHeight-e.oScrBox.offsetHeight,e.oDragMain=o.children[0],e.oDragCn=e.oDragMain.getElementsByTagName("div")[0],t.appendChild(o),e.oScrBar.appendChild(t)},dragHFn:function(){var e=this,t=Math.round(e.oScrBox.offsetHeight/e.oScrCn.offsetHeight*1e4)/100,o=e.obj.scrH,n=e.oDragCn;if("string"==typeof o&&"auto"===o)n.style.height=5>=t?"5%":t>=100?"98%":t+"%";else{if("number"!=typeof o)throw new Error("options.scrH 参数不对");n.style.height=1>o?"2px":o>=parseInt(e.oScrBox.offsetHeight)?e.oScrBox.offsetHeight-10+"px":o+"px"}},scrollEFn:function(){function e(e){e=t.EU.getEvent(e),o=e.wheelDelta?e.wheelDelta:40*-e.detail,r=o>0?!0:!1,n.setTop(r?n.oDragCn.offsetTop-n.obj.Rang:n.oDragCn.offsetTop+n.obj.Rang),t.EU.preventDefault(e)}var o,n=this,r=!0;return{scrollEvt:function(){t.EU.addHandler(n.oScrBox,"mousewheel",e),t.EU.addHandler(n.oScrBox,"DOMMouseScroll",e),t.EU.addHandler(n.oDragMain,"mousewheel",e),t.EU.addHandler(n.oDragMain,"DOMMouseScroll",e)},removeScrollEvt:function(){t.EU.removeHandler(n.oScrBox,"mousewheel",e),t.EU.removeHandler(n.oScrBox,"DOMMouseScroll",e),t.EU.removeHandler(n.oDragMain,"mousewheel",e),t.EU.removeHandler(n.oDragMain,"DOMMouseScroll",e)}}},clickFn:function(){function e(e){e=t.EU.getEvent(e);var n=t.EU.getTarget(e),r=document.documentElement.scrollTop||document.body.scrollTop,a=e.clientY+r-(o.oDragMain.getBoundingClientRect().top+r),i=(a-o.oDragCn.offsetHeight/2).toFixed(0);n.className.indexOf(o.tardrag)>-1?t.EU.stopPropagation(e):o.setTop(i)}var o=this;return{clickEvt:function(){t.EU.addHandler(o.oDragMain,"click",e)},removeclickEvt:function(){t.EU.removeHandler(o.oDragMain,"click",e)}}},dragDropFn:function(){function e(e){e=t.EU.getEvent(e);var a=t.EU.getTarget(e),i=document.documentElement.scrollTop||document.body.scrollTop;switch(e.type){case"mousedown":a.className.indexOf(o.tardrag)>-1&&(n=a,t.EU.preventDefault(e),t.EU.stopPropagation(e),r=e.clientY+i-n.offsetTop,n.setCapture&&n.setCapture());break;case"mousemove":if(null!==n){var c=e.clientY+i-r;o.setTop(c)}break;case"mouseup":o.oDragCn.setCapture&&o.oDragCn.releaseCapture(),n=null}}var o=this,n=null,r=0;return{dragEvent:function(){t.EU.addHandler(document,"mousedown",e),t.EU.addHandler(document,"mousemove",e),t.EU.addHandler(document,"mouseup",e)},removedragEvt:function(){t.EU.removeHandler(document,"mousedown",e),t.EU.removeHandler(document,"mousemove",e),t.EU.removeHandler(document,"mouseup",e)}}},setScrollT:function(){var e=this,t=e.obj.scrPos;if("string"!=typeof t||"auto"!==t){if("number"!=typeof t)throw new error("error");var o=-Math.abs(t);-o>=e.oScrCn.offsetHeight-e.oScrBox.offsetHeight&&(o=-(e.oScrCn.offsetHeight-e.oScrBox.offsetHeight));var n=o/(e.oScrCn.offsetHeight-e.oScrBox.offsetHeight),r=-(n*(e.oDragMain.offsetHeight-e.oDragCn.offsetHeight)).toFixed(0);e.obj.Anim?(e.buttur(e.oScrCn,{top:o}),e.buttur(e.oDragCn,{top:r})):(e.oScrCn.style.top=o+"px",e.oDragCn.style.top=r+"px"),e.obj.callbacks.call(e,o)}},setTop:function(e){var t=this;0>=e?e=0:e>=t.oDragMain.offsetHeight-t.oDragCn.offsetHeight&&(e=t.oDragMain.offsetHeight-t.oDragCn.offsetHeight);var o=e/(t.oDragMain.offsetHeight-t.oDragCn.offsetHeight),n=-o*t.oMaxH,r=n.toFixed(0);t.obj.Anim?(t.buttur(t.oDragCn,{top:e}),t.buttur(t.oScrCn,{top:r})):(t.oDragCn.style.top=e+"px",t.oScrCn.style.top=r+"px"),t.obj.callbacks.call(t,r)},buttur:function(e,t){window.clearTimeout(e.timer);var o=this,n=null;for(direc in t){var r=direc.toLowerCase(),a="offset"+r.substr(0,1).toUpperCase()+r.substring(1).toLowerCase(),i=t[direc],c=(i-e[a])/8;c=c>=0?Math.ceil(c):Math.floor(c),e.style[r]=e[a]+c+"px",n+=c}n&&("function"==typeof fnCallback?fnCallback.call(e):e.timer=window.setTimeout(function(){o.buttur(e,t)},20))},extendDeep:function(e,t){var o,n=Object.prototype.toString(),r="[Object Array]";t=t||{};for(o in e)e.hasOwnProperty(o)&&("Object"==typeof e[o]?(t[o]=n.call(e[o])===r?[]:{},extendDeep(e[o],t[o])):t[o]=e[o]);return t}},window.MxScrollBar=function(t){return new e(t)}}();